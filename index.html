<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>动物系人格测试 - 探索你的动物性格</title>
  <!-- Tailwind CSS v3 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <!-- 统一的 Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            secondary: '#f472b6',
            extraversion: '#f97316', // 外向性 - 暖色系
            agreeableness: '#22c55e', // 宜人性 - 绿色系
            conscientiousness: '#3b82f6', // 尽责性 - 蓝色系
            neuroticism: '#8b5cf6', // 情绪稳定性 - 冷色系
            openness: '#ec4899', // 开放性 - 多彩色系
            common: '#9ca3af', // 普通款
            rare: '#f59e0b', // 稀有款
            hidden: '#8b5cf6', // 隐藏款
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          animation: {
            'bounce-slow': 'bounce 3s infinite',
            'float': 'float 6s ease-in-out infinite',
            'glow': 'glow 2s ease-in-out infinite alternate',
            'spin-slow': 'spin 8s linear infinite',
            'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            glow: {
              '0%': { boxShadow: '0 0 5px rgba(139, 92, 246, 0.5)' },
              '100%': { boxShadow: '0 0 20px rgba(139, 92, 246, 0.8)' },
            }
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .text-shadow-lg {
        text-shadow: 0 4px 8px rgba(0,0,0,0.2);
      }
      .bg-gradient-radial {
        background-image: radial-gradient(circle, var(--tw-gradient-stops));
      }
      .animal-card {
        @apply relative overflow-hidden rounded-xl bg-white shadow-lg transition-all duration-300 hover:shadow-xl;
      }
      .animal-card-common {
        @apply border-2 border-common;
      }
      .animal-card-rare {
        @apply border-2 border-rare animate-pulse-slow;
      }
      .animal-card-hidden {
        @apply border-2 border-hidden animate-glow;
      }
      .btn-primary {
        @apply px-6 py-3 bg-primary text-white rounded-full font-medium shadow-md hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary/50;
      }
      .btn-secondary {
        @apply px-6 py-3 bg-secondary text-white rounded-full font-medium shadow-md hover:bg-secondary/90 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-secondary/50;
      }
      .btn-outline {
        @apply px-6 py-3 border border-primary text-primary rounded-full font-medium hover:bg-primary hover:text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary/50;
      }
      .option-card {
        @apply p-4 border border-gray-200 rounded-lg cursor-pointer transition-all duration-200 hover:border-primary hover:bg-primary/5 focus:outline-none focus:ring-2 focus:ring-primary/50;
      }
      .option-card.selected {
        @apply bg-primary/10 border-primary;
      }
      .progress-bar {
        @apply h-2 bg-gray-200 rounded-full overflow-hidden;
      }
      .progress-bar-fill {
        @apply h-full bg-gradient-to-r from-primary to-secondary transition-all duration-300;
      }
      .blindbox {
        @apply relative w-48 h-48 mx-auto bg-gradient-radial from-gray-800 to-gray-900 rounded-xl shadow-2xl overflow-hidden cursor-pointer transform transition-all duration-300 hover:scale-105;
      }
      .blindbox-common {
        @apply before:absolute before:top-2 before:left-2 before:w-10 before:h-10 before:bg-common before:rounded-full before:content-[''];
      }
      .blindbox-rare {
        @apply before:absolute before:top-2 before:left-2 before:w-10 before:h-10 before:bg-rare before:rounded-full before:content-[''] before:animate-pulse;
      }
      .blindbox-hidden {
        @apply before:absolute before:top-2 before:left-2 before:w-10 before:h-10 before:bg-hidden before:rounded-full before:content-[''] before:animate-pulse;
      }
      .blindbox-opening {
        @apply animate-spin-slow;
      }
      .dimension-badge {
        @apply px-3 py-1 text-xs font-medium rounded-full;
      }
      .dimension-badge-extraversion {
        @apply bg-extraversion/20 text-extraversion;
      }
      .dimension-badge-agreeableness {
        @apply bg-agreeableness/20 text-agreeableness;
      }
      .dimension-badge-conscientiousness {
        @apply bg-conscientiousness/20 text-conscientiousness;
      }
      .dimension-badge-neuroticism {
        @apply bg-neuroticism/20 text-neuroticism;
      }
      .dimension-badge-openness {
        @apply bg-openness/20 text-openness;
      }
    }
  </style>
</head>
<body class="bg-gray-50 font-sans">
  <!-- 导航栏 -->
  <nav class="fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-md shadow-sm z-50">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center">
        <i class="fa fa-paw text-primary text-2xl mr-2"></i>
        <div>
          <div class="text-xl font-bold text-gray-800">动物系人格测试</div>
          <div class="text-xs text-primary font-medium">星芒测评社</div>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <button id="nav-home" class="text-gray-600 hover:text-primary transition-colors">首页</button>
        <button id="nav-test" class="text-gray-600 hover:text-primary transition-colors">开始测试</button>
        <button id="nav-collection" class="text-gray-600 hover:text-primary transition-colors">我的收集</button>
        <button id="nav-about" class="text-gray-600 hover:text-primary transition-colors">关于</button>
      </div>
    </div>
  </nav>

  <!-- 主内容区 -->
  <main class="container mx-auto px-4 pt-24 pb-16">
    <!-- 首页 -->
    <section id="section-home" class="min-h-[calc(100vh-8rem)] flex flex-col justify-center items-center">
      <div class="text-center mb-12">
        <div class="inline-block px-4 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-4">星芒测评社</div>
        <h1 class="text-4xl md:text-6xl font-bold text-gray-800 mb-4 text-shadow-lg">探索你的<span class="text-primary">动物系人格</span></h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">通过科学的大五人格模型，发现你的动物性格类型，收集专属盲盒，解锁更多有趣的性格洞察！</p>
      </div>
      
      <div class="relative w-full max-w-3xl mx-auto mb-16">
        <div class="absolute -top-10 -left-10 w-40 h-40 bg-extraversion/20 rounded-full filter blur-3xl"></div>
        <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-openness/20 rounded-full filter blur-3xl"></div>
        <div class="relative grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
          <div class="animal-card animal-card-common p-4 flex flex-col items-center transform transition-all duration-300 hover:-translate-y-2">
            <div class="relative w-24 h-24 flex items-center justify-center mb-2 overflow-hidden rounded-full bg-gradient-to-br from-gray-100 to-gray-200">
              <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/4bca889a46a4414389fa1d9f70ca0f69~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822750&x-signature=hyZmv5lD%2ByjUSrMPSUVARz25rDw%3D" alt="刺猬系" class="w-20 h-20 object-contain transition-transform duration-300 hover:scale-110">
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-full pointer-events-none"></div>
            </div>
            <h3 class="font-medium text-gray-800">刺猬系</h3>
            <p class="text-xs text-gray-500">细节守护者</p>
          </div>
          <div class="animal-card animal-card-common p-4 flex flex-col items-center transform transition-all duration-300 hover:-translate-y-2">
            <div class="relative w-24 h-24 flex items-center justify-center mb-2 overflow-hidden rounded-full bg-gradient-to-br from-gray-100 to-gray-200">
              <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/7b295fea8fd7435e8350cc2832e2eb55~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822750&x-signature=Wj%2FgPELAwyaNq5nX025eU4wcMnc%3D" alt="水獭系" class="w-20 h-20 object-contain transition-transform duration-300 hover:scale-110">
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-full pointer-events-none"></div>
            </div>
            <h3 class="font-medium text-gray-800">水獭系</h3>
            <p class="text-xs text-gray-500">氛围粘合剂</p>
          </div>
          <div class="animal-card animal-card-rare p-4 flex flex-col items-center transform transition-all duration-300 hover:-translate-y-2">
            <div class="relative w-24 h-24 flex items-center justify-center mb-2 overflow-hidden rounded-full bg-gradient-to-br from-yellow-100 to-yellow-200">
              <img src="https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/260a047ef3d84db4a20928030737427f~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822762&x-signature=gvTtPm4a2%2F%2BQDFgo6kplqVggc3M%3D" alt="金雕系" class="w-20 h-20 object-contain transition-transform duration-300 hover:scale-110">
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-full pointer-events-none"></div>
            </div>
            <h3 class="font-medium text-gray-800">金雕系</h3>
            <p class="text-xs text-rare font-medium">战略决策者</p>
          </div>
          <div class="animal-card animal-card-hidden p-4 flex flex-col items-center transform transition-all duration-300 hover:-translate-y-2">
            <div class="relative w-24 h-24 flex items-center justify-center mb-2 overflow-hidden rounded-full bg-gradient-to-br from-purple-100 to-purple-200">
              <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/39523965a2764a349662d32025adfa9f~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822762&x-signature=FPolwqDoB4rcPUIJtrS1OWmEuZE%3D" alt="烛龙系" class="w-20 h-20 object-contain transition-transform duration-300 hover:scale-110">
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-full pointer-events-none"></div>
            </div>
            <h3 class="font-medium text-gray-800">烛龙系</h3>
            <p class="text-xs text-hidden font-medium">极致创造体</p>
          </div>
        </div>
      </div>
      
      <div class="flex flex-col sm:flex-row gap-4">
        <button id="start-test-btn" class="btn-primary flex items-center justify-center">
          <i class="fa fa-play-circle mr-2"></i>开始测试
        </button>
        <button id="view-collection-btn" class="btn-outline flex items-center justify-center">
          <i class="fa fa-collection mr-2"></i>查看收集
        </button>
      </div>
    </section>

    <!-- 测试页面 -->
    <section id="section-test" class="hidden min-h-[calc(100vh-8rem)]">
      <div class="max-w-3xl mx-auto">
        <div class="mb-6">
          <div class="flex justify-between items-center mb-2">
            <span class="text-sm font-medium text-gray-600">问题 <span id="current-question">1</span>/30</span>
            <span class="text-sm font-medium text-gray-600">剩余时间: <span id="time-remaining">10:00</span></span>
          </div>
          <div class="progress-bar">
            <div id="progress-bar-fill" class="progress-bar-fill" style="width: 3.33%"></div>
          </div>
        </div>

        <div id="question-container" class="bg-white rounded-2xl shadow-lg p-6 mb-6">
          <div id="dimension-indicator" class="dimension-badge dimension-badge-extraversion inline-block mb-4">
            外向性模块
          </div>
          <h2 id="question-text" class="text-2xl font-bold text-gray-800 mb-6">在社交聚会中，你通常是：</h2>
          <div id="options-container" class="space-y-4">
            <div class="option-card" data-score="3">
              <p>A. 主动与陌生人交流的人</p>
            </div>
            <div class="option-card" data-score="2">
              <p>B. 等待别人来接近你</p>
            </div>
            <div class="option-card" data-score="1">
              <p>C. 倾向于与熟悉的人交谈</p>
            </div>
            <div class="option-card" data-score="0">
              <p>D. 尽量保持低调，避免过多互动</p>
            </div>
          </div>
        </div>

        <div class="flex justify-between">
          <button id="prev-btn" class="btn-outline opacity-50 cursor-not-allowed" disabled>
            <i class="fa fa-arrow-left mr-2"></i>上一题
          </button>
          <button id="next-btn" class="btn-primary">
            下一题<i class="fa fa-arrow-right ml-2"></i>
          </button>
        </div>
      </div>
    </section>

    <!-- 结果页面 -->
    <section id="section-result" class="hidden min-h-[calc(100vh-8rem)]">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-8">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">你的动物系人格是...</h1>
          <p class="text-xl text-gray-600">根据大五人格模型分析</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <!-- 左侧：动物形象和类型 -->
          <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center">
            <div id="result-animation-container" class="relative w-64 h-64 mb-6">
              <div id="blindbox-container" class="blindbox blindbox-common absolute inset-0 flex items-center justify-center">
                <div class="text-center">
                  <i class="fa fa-gift text-4xl text-white mb-2"></i>
                  <p class="text-white font-medium">点击开启盲盒</p>
                </div>
              </div>
              <div id="animal-image-container" class="hidden absolute inset-0 flex items-center justify-center">
                <div class="relative w-56 h-56 flex items-center justify-center overflow-hidden rounded-full bg-gradient-to-br from-gray-100 to-gray-200">
                  <img id="result-animal-image" src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/4bca889a46a4414389fa1d9f70ca0f69~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822750&x-signature=hyZmv5lD%2ByjUSrMPSUVARz25rDw%3D" alt="动物形象" class="w-48 h-48 object-contain animate-float transition-transform duration-500 hover:scale-110">
                  <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-full pointer-events-none"></div>
                </div>
              </div>
            </div>
            
            <div id="animal-type-container" class="text-center">
              <h2 id="animal-name" class="text-3xl font-bold text-gray-800 mb-2">刺猬系</h2>
              <div id="animal-rarity" class="inline-block px-3 py-1 rounded-full text-sm font-medium bg-common/20 text-common mb-4">
                普通款
              </div>
              <p id="animal-tagline" class="text-lg text-gray-600 mb-4">细节守护者</p>
              <p id="animal-description" class="text-gray-600">
                擅长精准执行独立任务，危机中保持冷静。社交优势在于能够专注细节，情绪稳定，独立思考。
              </p>
            </div>
          </div>

          <!-- 右侧：雷达图和维度分析 -->
          <div class="bg-white rounded-2xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">五维性格分析</h3>
            <div class="h-64 mb-6">
              <canvas id="personality-radar-chart"></canvas>
            </div>
            <div id="dimension-scores" class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-gray-700">外向性</span>
                <div class="flex items-center">
                  <div class="w-32 h-2 bg-gray-200 rounded-full mr-2">
                    <div class="h-full bg-extraversion rounded-full" style="width: 30%"></div>
                  </div>
                  <span class="text-sm font-medium text-gray-600">低</span>
                </div>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-700">宜人性</span>
                <div class="flex items-center">
                  <div class="w-32 h-2 bg-gray-200 rounded-full mr-2">
                    <div class="h-full bg-agreeableness rounded-full" style="width: 60%"></div>
                  </div>
                  <span class="text-sm font-medium text-gray-600">中</span>
                </div>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-700">尽责性</span>
                <div class="flex items-center">
                  <div class="w-32 h-2 bg-gray-200 rounded-full mr-2">
                    <div class="h-full bg-conscientiousness rounded-full" style="width: 60%"></div>
                  </div>
                  <span class="text-sm font-medium text-gray-600">中</span>
                </div>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-700">情绪稳定性</span>
                <div class="flex items-center">
                  <div class="w-32 h-2 bg-gray-200 rounded-full mr-2">
                    <div class="h-full bg-neuroticism rounded-full" style="width: 80%"></div>
                  </div>
                  <span class="text-sm font-medium text-gray-600">高</span>
                </div>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-700">开放性</span>
                <div class="flex items-center">
                  <div class="w-32 h-2 bg-gray-200 rounded-full mr-2">
                    <div class="h-full bg-openness rounded-full" style="width: 60%"></div>
                  </div>
                  <span class="text-sm font-medium text-gray-600">中</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
          <h3 class="text-xl font-bold text-gray-800 mb-4">社交优势分析</h3>
          <div id="social-strengths" class="space-y-4">
            <div class="flex items-start">
              <div class="bg-primary/10 rounded-full p-2 mr-4">
                <i class="fa fa-check text-primary"></i>
              </div>
              <div>
                <h4 class="font-medium text-gray-800">专注细节</h4>
                <p class="text-gray-600">能够发现他人忽略的细节，确保任务的准确性和完整性。</p>
              </div>
            </div>
            <div class="flex items-start">
              <div class="bg-primary/10 rounded-full p-2 mr-4">
                <i class="fa fa-check text-primary"></i>
              </div>
              <div>
                <h4 class="font-medium text-gray-800">情绪稳定</h4>
                <p class="text-gray-600">在压力和危机情况下能够保持冷静，做出理性决策。</p>
              </div>
            </div>
            <div class="flex items-start">
              <div class="bg-primary/10 rounded-full p-2 mr-4">
                <i class="fa fa-check text-primary"></i>
              </div>
              <div>
                <h4 class="font-medium text-gray-800">独立思考</h4>
                <p class="text-gray-600">不轻易受他人影响，能够独立分析问题并提出解决方案。</p>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <button id="share-result-btn" class="btn-outline flex items-center justify-center">
            <i class="fa fa-share-alt mr-2"></i>分享结果
          </button>
          <button id="save-to-collection-btn" class="btn-secondary flex items-center justify-center">
            <i class="fa fa-plus-circle mr-2"></i>保存到收集
          </button>
          <button id="restart-test-btn" class="btn-primary flex items-center justify-center">
            <i class="fa fa-refresh mr-2"></i>重新测试
          </button>
        </div>
      </div>
    </section>

    <!-- 收集页面 -->
    <section id="section-collection" class="hidden min-h-[calc(100vh-8rem)]">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-8">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">我的动物系人格收集</h1>
          <p class="text-xl text-gray-600">已收集 <span id="collection-count">0</span>/36 种动物</p>
          <div class="w-32 h-2 bg-gray-200 rounded-full mx-auto mt-4">
            <div id="collection-progress" class="h-full bg-primary rounded-full" style="width: 0%"></div>
          </div>
          <div class="flex justify-center mt-4 space-x-4 flex-wrap">
            <button id="export-collection-btn" class="btn-outline flex items-center justify-center px-4 py-2">
              <i class="fa fa-download mr-2"></i>导出数据
            </button>
            <label for="import-collection-btn" class="btn-outline flex items-center justify-center px-4 py-2 cursor-pointer">
              <i class="fa fa-upload mr-2"></i>导入数据
            </label>
            <input type="file" id="import-collection-btn" accept=".json" class="hidden">
            <button id="clear-collection-btn" class="btn-outline flex items-center justify-center px-4 py-2 text-red-500 border-red-500 hover:bg-red-50">
              <i class="fa fa-trash mr-2"></i>清理数据
            </button>
          </div>
        </div>

        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 md:gap-6">
          <!-- 收集的动物卡片将通过JavaScript动态生成 -->
          <div id="empty-collection-message" class="col-span-full text-center py-12">
            <i class="fa fa-inbox text-4xl text-gray-300 mb-4"></i>
            <p class="text-gray-500">你还没有收集任何动物系人格</p>
            <button id="start-test-from-collection" class="btn-primary mt-6">开始测试</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 关于页面 -->
    <section id="section-about" class="hidden min-h-[calc(100vh-8rem)]">
      <div class="max-w-3xl mx-auto">
        <div class="text-center mb-8">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">关于动物系人格测试</h1>
          <p class="text-xl text-gray-600">探索自我，发现独特的性格魅力</p>
        </div>

        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">测试理论基础</h2>
          <p class="text-gray-600 mb-4">
            动物系人格测试基于公开学术成果大五人格模型（OCEAN）开发，仅采用 "外向性、宜人性、尽责性、情绪稳定性、开放性" 五大维度框架，所有题目与解读均为原创，不涉及任何 copyrighted 测试题库（如 MBTI、DISC 等专属量表）。
          </p>
        </div>

        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">动物形象原创准则</h2>
          <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
            <li>原型差异化：选取 36 种涵盖哺乳、鸟类、爬行、昆虫的多元动物，避免集中于已有知名 IP 的核心形象</li>
            <li>视觉符号独创：每种动物设计 3 个专属视觉符号</li>
            <li>风格统一化：采用 "扁平化 + 微立体" 原创风格，头部比例 1:6.5，肢体融合人类关节与动物特征</li>
          </ul>
        </div>

        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">测试流程设计</h2>
          <p class="text-gray-600 mb-4">
            测试包含 30 道题目，分为 5 个模块，对应五大维度，预计 10 分钟完成。每个维度得分 0-18 分，按 "低（0-6）、中（7-12）、高（13-18）" 划分区间，生成 "五维得分雷达图" 和 "核心特质组合"。
          </p>
        </div>

        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">36+8 款结果体系</h2>
          <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
            <li>36 款基础款：对应常规性格组合</li>
            <li>6 款稀有款：对应单维度极值组合</li>
            <li>2 款隐藏款：对应五维均衡/两极分化</li>
          </ul>
        </div>

        <div class="text-center">
          <button id="back-to-home-from-about" class="btn-primary">
            <i class="fa fa-home mr-2"></i>返回首页
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- 页脚 -->
  <footer class="bg-gray-800 text-white py-8">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center space-x-2 mb-4 md:mb-0">
          <i class="fa fa-paw text-primary text-2xl"></i>
          <span class="text-xl font-bold">动物系人格测试</span>
        </div>
        <div class="flex space-x-4">
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fa fa-weibo text-xl"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fa fa-wechat text-xl"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fa fa-instagram text-xl"></i>
          </a>
        </div>
      </div>
      <div class="mt-6 text-center text-gray-400 text-sm">
        <p>© 2025 星芒测评社 - 动物系人格测试</p>
        <p class="mt-1">原创设计，趣味性格探索工具</p>
        <p class="mt-2">话题标签：#星芒测评社# #原创动物系人格#</p>
      </div>
    </div>
  </footer>

  <!-- 分享弹窗 -->
  <div id="share-modal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden">
    <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-bold text-gray-800">分享你的动物系人格</h3>
        <button id="close-share-modal" class="text-gray-500 hover:text-gray-700">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div class="space-y-4">
        <div class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
          <i class="fa fa-wechat text-green-500 text-2xl mr-4"></i>
          <span class="text-gray-700">分享到微信</span>
        </div>
        <div class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
          <i class="fa fa-weibo text-red-500 text-2xl mr-4"></i>
          <span class="text-gray-700">分享到微博</span>
        </div>
        <div class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
          <i class="fa fa-link text-blue-500 text-2xl mr-4"></i>
          <span class="text-gray-700">复制链接</span>
        </div>
        <div class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
          <i class="fa fa-image text-purple-500 text-2xl mr-4"></i>
          <span class="text-gray-700">保存图片</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 数据模型
    const appData = {
      // 当前用户数据
      user: {
        scores: {
          extraversion: 0,      // 外向性
          agreeableness: 0,     // 宜人性
          conscientiousness: 0, // 尽责性
          neuroticism: 0,       // 情绪稳定性
          openness: 0           // 开放性
        },
        currentQuestionIndex: 0,
        selectedOptions: [],
        collection: [],
        timeRemaining: 600 // 10分钟，单位秒
      },
      
      // 测试题目数据
      questions: [
        // 外向性模块
        {
          id: 1,
          dimension: "extraversion",
          dimensionName: "外向性",
          text: "在社交聚会中，你通常是：",
          options: [
            { text: "主动与陌生人交流的人", score: 3 },
            { text: "等待别人来接近你", score: 2 },
            { text: "倾向于与熟悉的人交谈", score: 1 },
            { text: "尽量保持低调，避免过多互动", score: 0 }
          ]
        },
        {
          id: 2,
          dimension: "extraversion",
          dimensionName: "外向性",
          text: "当你需要休息时，你更喜欢：",
          options: [
            { text: "参加热闹的聚会", score: 3 },
            { text: "与几个好朋友一起度过", score: 2 },
            { text: "与一个亲密的朋友见面", score: 1 },
            { text: "独自安静地度过", score: 0 }
          ]
        },
        {
          id: 3,
          dimension: "extraversion",
          dimensionName: "外向性",
          text: "在团队讨论中，你通常：",
          options: [
            { text: "积极发言，主导讨论", score: 3 },
            { text: "经常发言，分享自己的想法", score: 2 },
            { text: "偶尔发言，主要倾听他人", score: 1 },
            { text: "很少发言，更喜欢观察", score: 0 }
          ]
        },
        {
          id: 4,
          dimension: "extraversion",
          dimensionName: "外向性",
          text: "你更喜欢的活动是：",
          options: [
            { text: "参加大型活动或派对", score: 3 },
            { text: "组织小型聚会", score: 2 },
            { text: "与朋友一起看电影或吃饭", score: 1 },
            { text: "在家看书或上网", score: 0 }
          ]
        },
        {
          id: 5,
          dimension: "extraversion",
          dimensionName: "外向性",
          text: "当你遇到新认识的人时，你会：",
          options: [
            { text: "很快就感到自在并开始交谈", score: 3 },
            { text: "需要一点时间来感到自在", score: 2 },
            { text: "有点害羞，但会尝试交谈", score: 1 },
            { text: "倾向于保持距离，很少主动交谈", score: 0 }
          ]
        },
        {
          id: 6,
          dimension: "extraversion",
          dimensionName: "外向性",
          text: "在工作环境中，你更喜欢：",
          options: [
            { text: "频繁与同事互动", score: 3 },
            { text: "适度的互动", score: 2 },
            { text: "较少的互动", score: 1 },
            { text: "尽可能独立工作", score: 0 }
          ]
        },
        
        // 宜人性模块
        {
          id: 7,
          dimension: "agreeableness",
          dimensionName: "宜人性",
          text: "当朋友需要帮助时，你通常会：",
          options: [
            { text: "毫不犹豫地提供帮助", score: 3 },
            { text: "如果方便的话会提供帮助", score: 2 },
            { text: "犹豫一下，但最终会帮助", score: 1 },
            { text: "找借口推脱", score: 0 }
          ]
        },
        {
          id: 8,
          dimension: "agreeableness",
          dimensionName: "宜人性",
          text: "在团队中，当你的意见与他人不同时，你会：",
          options: [
            { text: "尊重他人意见，寻求共识", score: 3 },
            { text: "表达自己的观点，但也考虑他人", score: 2 },
            { text: "坚持自己的观点，但不与人争论", score: 1 },
            { text: "坚持自己的观点，并试图说服他人", score: 0 }
          ]
        },
        {
          id: 9,
          dimension: "agreeableness",
          dimensionName: "宜人性",
          text: "你认为自己是一个：",
          options: [
            { text: "非常善解人意的人", score: 3 },
            { text: "比较善解人意的人", score: 2 },
            { text: "有时善解人意的人", score: 1 },
            { text: "不太善解人意的人", score: 0 }
          ]
        },
        {
          id: 10,
          dimension: "agreeableness",
          dimensionName: "宜人性",
          text: "当他人对你不友好时，你会：",
          options: [
            { text: "保持友好，不与对方计较", score: 3 },
            { text: "保持礼貌，但保持距离", score: 2 },
            { text: "也变得不友好", score: 1 },
            { text: "直接表达不满", score: 0 }
          ]
        },
        {
          id: 11,
          dimension: "agreeableness",
          dimensionName: "宜人性",
          text: "你更倾向于：",
          options: [
            { text: "优先考虑他人需求", score: 3 },
            { text: "平衡考虑自己和他人需求", score: 2 },
            { text: "优先考虑自己需求，但也顾及他人", score: 1 },
            { text: "优先考虑自己需求", score: 0 }
          ]
        },
        {
          id: 12,
          dimension: "agreeableness",
          dimensionName: "宜人性",
          text: "在解决冲突时，你通常会：",
          options: [
            { text: "寻求双赢解决方案", score: 3 },
            { text: "愿意妥协", score: 2 },
            { text: "坚持自己的立场，但保持礼貌", score: 1 },
            { text: "不轻易让步", score: 0 }
          ]
        },
        
        // 尽责性模块
        {
          id: 13,
          dimension: "conscientiousness",
          dimensionName: "尽责性",
          text: "当你有重要任务时，你会：",
          options: [
            { text: "提前完成，留出充裕时间", score: 3 },
            { text: "按计划完成", score: 2 },
            { text: "有时会拖延，但最终完成", score: 1 },
            { text: "经常拖延，可能需要催促", score: 0 }
          ]
        },
        {
          id: 14,
          dimension: "conscientiousness",
          dimensionName: "尽责性",
          text: "团队项目临近截止时发现方案漏洞，你更倾向：",
          options: [
            { text: "立即暂停推进，组织全员重构核心逻辑", score: 3 },
            { text: "先标注问题，优先完成可交付部分", score: 2 },
            { text: "联系负责人确认优先级，再制定调整方案", score: 1 },
            { text: "按原计划提交，后续补充修正", score: 0 }
          ]
        },
        {
          id: 15,
          dimension: "conscientiousness",
          dimensionName: "尽责性",
          text: "你对细节的态度是：",
          options: [
            { text: "非常注重细节，追求完美", score: 3 },
            { text: "比较注重细节", score: 2 },
            { text: "一般，只要大体正确即可", score: 1 },
            { text: "不太在意细节，关注整体", score: 0 }
          ]
        },
        {
          id: 16,
          dimension: "conscientiousness",
          dimensionName: "尽责性",
          text: "当计划被打乱时，你会：",
          options: [
            { text: "迅速调整，制定新计划", score: 3 },
            { text: "有些困扰，但还是会适应", score: 2 },
            { text: "感到沮丧，但会尝试继续", score: 1 },
            { text: "很难适应，可能放弃计划", score: 0 }
          ]
        },
        {
          id: 17,
          dimension: "conscientiousness",
          dimensionName: "尽责性",
          text: "你通常如何安排自己的时间：",
          options: [
            { text: "有详细的计划和时间表", score: 3 },
            { text: "有大致的计划", score: 2 },
            { text: "比较随意，视情况而定", score: 1 },
            { text: "非常随意，很少计划", score: 0 }
          ]
        },
        {
          id: 18,
          dimension: "conscientiousness",
          dimensionName: "尽责性",
          text: "在完成任务时，你更注重：",
          options: [
            { text: "质量和准确性", score: 3 },
            { text: "质量和效率的平衡", score: 2 },
            { text: "效率，只要完成即可", score: 1 },
            { text: "尽快完成，不太在意质量", score: 0 }
          ]
        },
        
        // 情绪稳定性模块
        {
          id: 19,
          dimension: "neuroticism",
          dimensionName: "情绪稳定性",
          text: "当遇到挫折时，你通常会：",
          options: [
            { text: "保持冷静，寻找解决办法", score: 3 },
            { text: "有点沮丧，但很快恢复", score: 2 },
            { text: "感到沮丧，需要一段时间恢复", score: 1 },
            { text: "很难控制情绪，可能崩溃", score: 0 }
          ]
        },
        {
          id: 20,
          dimension: "neuroticism",
          dimensionName: "情绪稳定性",
          text: "当他人对你提出批评时，你会：",
          options: [
            { text: "冷静接受，视之为改进机会", score: 3 },
            { text: "有点不舒服，但会考虑批评的合理性", score: 2 },
            { text: "感到受伤，但不会表现出来", score: 1 },
            { text: "感到非常受伤，并可能反击", score: 0 }
          ]
        },
        {
          id: 21,
          dimension: "neuroticism",
          dimensionName: "情绪稳定性",
          text: "在压力下，你通常：",
          options: [
            { text: "保持冷静和专注", score: 3 },
            { text: "有点紧张，但仍能正常工作", score: 2 },
            { text: "非常紧张，工作效率下降", score: 1 },
            { text: "无法应对，可能需要暂停", score: 0 }
          ]
        },
        {
          id: 22,
          dimension: "neuroticism",
          dimensionName: "情绪稳定性",
          text: "你对未来的态度是：",
          options: [
            { text: "乐观，相信事情会顺利", score: 3 },
            { text: "比较乐观", score: 2 },
            { text: "中立，既不乐观也不悲观", score: 1 },
            { text: "有点悲观，担心可能出错", score: 0 }
          ]
        },
        {
          id: 23,
          dimension: "neuroticism",
          dimensionName: "情绪稳定性",
          text: "当你感到焦虑时，你会：",
          options: [
            { text: "找到积极的方式缓解焦虑", score: 3 },
            { text: "尝试忽略，继续前进", score: 2 },
            { text: "需要一些时间来平复", score: 1 },
            { text: "很难控制，可能影响日常生活", score: 0 }
          ]
        },
        {
          id: 24,
          dimension: "neuroticism",
          dimensionName: "情绪稳定性",
          text: "你认为自己的情绪波动：",
          options: [
            { text: "非常稳定，很少有大的波动", score: 3 },
            { text: "比较稳定，偶尔有小波动", score: 2 },
            { text: "有时波动较大", score: 1 },
            { text: "经常波动，难以预测", score: 0 }
          ]
        },
        
        // 开放性模块
        {
          id: 25,
          dimension: "openness",
          dimensionName: "开放性",
          text: "当遇到新的想法或观念时，你会：",
          options: [
            { text: "非常开放，乐于接受新观念", score: 3 },
            { text: "比较开放，愿意考虑新观念", score: 2 },
            { text: "保持中立，需要时间来评估", score: 1 },
            { text: "比较保守，倾向于传统观念", score: 0 }
          ]
        },
        {
          id: 26,
          dimension: "openness",
          dimensionName: "开放性",
          text: "你对艺术和美学的兴趣是：",
          options: [
            { text: "非常浓厚，经常关注", score: 3 },
            { text: "比较浓厚", score: 2 },
            { text: "一般，偶尔关注", score: 1 },
            { text: "不太感兴趣", score: 0 }
          ]
        },
        {
          id: 27,
          dimension: "openness",
          dimensionName: "开放性",
          text: "在解决问题时，你更喜欢：",
          options: [
            { text: "尝试创新的方法", score: 3 },
            { text: "结合传统和创新方法", score: 2 },
            { text: "主要使用传统方法", score: 1 },
            { text: "坚持已被证明有效的方法", score: 0 }
          ]
        },
        {
          id: 28,
          dimension: "openness",
          dimensionName: "开放性",
          text: "你对旅行和探索新地方的态度是：",
          options: [
            { text: "非常喜欢，渴望探索未知", score: 3 },
            { text: "喜欢，愿意尝试新地方", score: 2 },
            { text: "一般，偶尔会去新地方", score: 1 },
            { text: "更喜欢熟悉的地方", score: 0 }
          ]
        },
        {
          id: 29,
          dimension: "openness",
          dimensionName: "开放性",
          text: "你对学习新技能的态度是：",
          options: [
            { text: "非常积极，总是想学习新东西", score: 3 },
            { text: "比较积极，愿意学习有用的技能", score: 2 },
            { text: "一般，只在必要时学习", score: 1 },
            { text: "不太积极，更喜欢使用已有的技能", score: 0 }
          ]
        },
        {
          id: 30,
          dimension: "openness",
          dimensionName: "开放性",
          text: "你对抽象概念和理论的理解能力：",
          options: [
            { text: "很强，喜欢思考抽象概念", score: 3 },
            { text: "较好，能够理解大多数抽象概念", score: 2 },
            { text: "一般，需要具体例子来理解", score: 1 },
            { text: "较弱，更喜欢具体的、实际的事物", score: 0 }
          ]
        }
      ],
      
      // 动物类型数据
      animalTypes: [
        // 普通款
        {
          id: "hedgehog",
          name: "刺猬系",
          category: "哺乳类",
          rarity: "common",
          tagline: "细节守护者",
          description: "擅长精准执行独立任务，危机中保持冷静。社交优势在于能够专注细节，情绪稳定，独立思考。",
          image: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/4bca889a46a4414389fa1d9f70ca0f69~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822750&x-signature=hyZmv5lD%2ByjUSrMPSUVARz25rDw%3D",
          dimensions: {
            extraversion: "低",
            agreeableness: "中",
            conscientiousness: "中",
            neuroticism: "高",
            openness: "中"
          },
          strengths: [
            {
              title: "专注细节",
              description: "能够发现他人忽略的细节，确保任务的准确性和完整性。"
            },
            {
              title: "情绪稳定",
              description: "在压力和危机情况下能够保持冷静，做出理性决策。"
            },
            {
              title: "独立思考",
              description: "不轻易受他人影响，能够独立分析问题并提出解决方案。"
            }
          ]
        },
        {
          id: "otter",
          name: "水獭系",
          category: "哺乳类",
          rarity: "common",
          tagline: "氛围粘合剂",
          description: "快速融入陌生群体，化解尴尬场景。社交优势在于善于建立联系，创造轻松氛围，促进团队和谐。",
          image: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/7b295fea8fd7435e8350cc2832e2eb55~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822750&x-signature=Wj%2FgPELAwyaNq5nX025eU4wcMnc%3D",
          dimensions: {
            extraversion: "高",
            agreeableness: "高",
            conscientiousness: "中",
            neuroticism: "中",
            openness: "中"
          },
          strengths: [
            {
              title: "建立联系",
              description: "擅长与不同类型的人建立联系，促进团队凝聚力。"
            },
            {
              title: "创造轻松氛围",
              description: "能够化解紧张局势，创造轻松愉快的工作环境。"
            },
            {
              title: "促进和谐",
              description: "善于调解冲突，维护团队和谐稳定。"
            }
          ]
        },
        {
          id: "lark",
          name: "百灵鸟系",
          category: "鸟类",
          rarity: "common",
          tagline: "创意传声筒",
          description: "将复杂观点转化为通俗表达，激发团队灵感。社交优势在于善于沟通表达，激发创意，促进协作。",
          image: "https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/61596b80b7d44fe18188a7b11ee1da27~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822750&x-signature=VUODT4ynrHyeTk%2Fd5B5d1UMMUSc%3D",
          dimensions: {
            extraversion: "高",
            agreeableness: "中",
            conscientiousness: "中",
            neuroticism: "中",
            openness: "高"
          },
          strengths: [
            {
              title: "沟通表达",
              description: "善于将复杂概念转化为通俗易懂的表达。"
            },
            {
              title: "激发创意",
              description: "能够提出新颖想法，激发团队创造力。"
            },
            {
              title: "促进协作",
              description: "擅长协调不同观点，促进有效协作。"
            }
          ]
        },
        {
          id: "treefrog",
          name: "树蛙系",
          category: "爬行/两栖类",
          rarity: "common",
          tagline: "跨界连接器",
          description: "在不同圈层间搭建沟通桥梁，适配多元合作。社交优势在于适应能力强，跨界整合资源，促进多元化合作。",
          image: "https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/fd796d847af543c19c656d912e1c871b~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822750&x-signature=rA9yF9w1%2BOXIPLxVf1k9%2B9f6xlg%3D",
          dimensions: {
            extraversion: "中",
            agreeableness: "高",
            conscientiousness: "中",
            neuroticism: "中",
            openness: "高"
          },
          strengths: [
            {
              title: "适应能力强",
              description: "能够快速适应不同环境和人群。"
            },
            {
              title: "跨界整合",
              description: "擅长整合不同领域的资源和知识。"
            },
            {
              title: "促进多元化合作",
              description: "能够在不同背景的人之间搭建沟通桥梁。"
            }
          ]
        },
        {
          id: "bee",
          name: "蜜蜂系",
          category: "昆虫/其他",
          rarity: "common",
          tagline: "任务推进器",
          description: "高效拆解目标，协调资源落地执行。社交优势在于组织能力强，执行力强，注重团队协作。",
          image: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/f48b102b94f740e0b26108024fa2cbb6~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822766&x-signature=QDRR5jojPJbYNZ%2BEjg3iuST4dv0%3D",
          dimensions: {
            extraversion: "中",
            agreeableness: "高",
            conscientiousness: "高",
            neuroticism: "中",
            openness: "低"
          },
          strengths: [
            {
              title: "组织能力强",
              description: "擅长规划和组织复杂任务。"
            },
            {
              title: "执行力强",
              description: "能够高效推进任务，确保目标达成。"
            },
            {
              title: "注重团队协作",
              description: "善于协调团队资源，促进合作。"
            }
          ]
        },
        
        // 稀有款
        {
          id: "goldeneagle",
          name: "金雕系",
          category: "鸟类",
          rarity: "rare",
          tagline: "战略决策者",
          description: "高瞻远瞩，果断决策，引领团队方向。社交优势在于战略思维强，决策果断，领导力出众。",
          image: "https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/260a047ef3d84db4a20928030737427f~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822762&x-signature=gvTtPm4a2%2F%2BQDFgo6kplqVggc3M%3D",
          dimensions: {
            extraversion: "高",
            agreeableness: "低",
            conscientiousness: "高",
            neuroticism: "中",
            openness: "中"
          },
          strengths: [
            {
              title: "战略思维",
              description: "能够从全局角度思考问题，制定长远规划。"
            },
            {
              title: "决策果断",
              description: "在关键时刻能够迅速做出决策。"
            },
            {
              title: "领导力出众",
              description: "善于引领团队，推动变革。"
            }
          ]
        },
        
        // 隐藏款
        {
          id: "baize",
          name: "白泽系",
          category: "神话",
          rarity: "hidden",
          tagline: "多元适配者",
          description: "五维均衡发展，能够适应各种环境和角色。社交优势在于全方位发展，适应性强，善于平衡各种需求。",
          image: "https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/8c54ea316530402190584aa5ffc488fb~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822762&x-signature=%2BcmSOHJ%2Fh6h1i2P4ITjGNwS5%2Be0%3D",
          dimensions: {
            extraversion: "中",
            agreeableness: "中",
            conscientiousness: "中",
            neuroticism: "中",
            openness: "中"
          },
          strengths: [
            {
              title: "全方位发展",
              description: "在各个维度都有均衡的能力和表现。"
            },
            {
              title: "适应性强",
              description: "能够适应各种环境和挑战。"
            },
            {
              title: "善于平衡",
              description: "能够在不同需求之间找到平衡点。"
            }
          ]
        },
        {
          id: "zhulong",
          name: "烛龙系",
          category: "神话",
          rarity: "hidden",
          tagline: "极致创造体",
          description: "外向性极高，情绪稳定性极低，拥有非凡的创造力和激情。社交优势在于创造力出众，充满激情，能够激发他人。",
          image: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/39523965a2764a349662d32025adfa9f~tplv-a9rns2rl98-image.image?rcl=2025111602183269F4BC25459A33A7E70A&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1765822762&x-signature=FPolwqDoB4rcPUIJtrS1OWmEuZE%3D",
          dimensions: {
            extraversion: "极高",
            agreeableness: "中",
            conscientiousness: "中",
            neuroticism: "极低",
            openness: "高"
          },
          strengths: [
            {
              title: "创造力出众",
              description: "拥有非凡的想象力和创造力。"
            },
            {
              title: "充满激情",
              description: "对事物充满热情，能够感染他人。"
            },
            {
              title: "激发他人",
              description: "善于激发团队的创造力和热情。"
            }
          ]
        }
      ],
      
      // 页面元素
      elements: {
        sections: {
          home: document.getElementById('section-home'),
          test: document.getElementById('section-test'),
          result: document.getElementById('section-result'),
          collection: document.getElementById('section-collection'),
          about: document.getElementById('section-about')
        },
        navButtons: {
          home: document.getElementById('nav-home'),
          test: document.getElementById('nav-test'),
          collection: document.getElementById('nav-collection'),
          about: document.getElementById('nav-about')
        },
        testElements: {
          currentQuestion: document.getElementById('current-question'),
          timeRemaining: document.getElementById('time-remaining'),
          progressBarFill: document.getElementById('progress-bar-fill'),
          dimensionIndicator: document.getElementById('dimension-indicator'),
          questionText: document.getElementById('question-text'),
          optionsContainer: document.getElementById('options-container'),
          prevBtn: document.getElementById('prev-btn'),
          nextBtn: document.getElementById('next-btn')
        },
        resultElements: {
          blindboxContainer: document.getElementById('blindbox-container'),
          animalImageContainer: document.getElementById('animal-image-container'),
          resultAnimalImage: document.getElementById('result-animal-image'),
          animalName: document.getElementById('animal-name'),
          animalRarity: document.getElementById('animal-rarity'),
          animalTagline: document.getElementById('animal-tagline'),
          animalDescription: document.getElementById('animal-description'),
          socialStrengths: document.getElementById('social-strengths')
        },
        collectionElements: {
          collectionCount: document.getElementById('collection-count'),
          collectionProgress: document.getElementById('collection-progress'),
          emptyCollectionMessage: document.getElementById('empty-collection-message')
        },
        modals: {
          shareModal: document.getElementById('share-modal')
        }
      },
      
      // 计时器
      timer: null
    };

    // 工具函数
    const utils = {
      // 显示指定页面，隐藏其他页面
      showSection: function(sectionId) {
        // 隐藏所有页面
        Object.values(appData.elements.sections).forEach(section => {
          section.classList.add('hidden');
        });
        
        // 显示指定页面
        appData.elements.sections[sectionId].classList.remove('hidden');
        
        // 更新导航按钮状态
        Object.entries(appData.elements.navButtons).forEach(([id, button]) => {
          if (id === sectionId) {
            button.classList.add('text-primary');
            button.classList.remove('text-gray-600');
          } else {
            button.classList.remove('text-primary');
            button.classList.add('text-gray-600');
          }
        });
      },
      
      // 初始化测试页面
      initTestPage: function() {
        appData.user.currentQuestionIndex = 0;
        appData.user.selectedOptions = new Array(appData.questions.length).fill(null);
        appData.user.scores = {
          extraversion: 0,
          agreeableness: 0,
          conscientiousness: 0,
          neuroticism: 0,
          openness: 0
        };
        appData.user.timeRemaining = 600; // 10分钟
        
        this.updateQuestion();
        this.updateTimer();
        
        // 启动计时器
        if (appData.timer) {
          clearInterval(appData.timer);
        }
        appData.timer = setInterval(() => {
          appData.user.timeRemaining--;
          this.updateTimer();
          
          if (appData.user.timeRemaining <= 0) {
            clearInterval(appData.timer);
            this.calculateResults();
          }
        }, 1000);
      },
      
      // 更新问题内容
      updateQuestion: function() {
        const question = appData.questions[appData.user.currentQuestionIndex];
        
        // 更新问题信息
        appData.elements.testElements.currentQuestion.textContent = question.id;
        appData.elements.testElements.questionText.textContent = question.text;
        
        // 更新维度指示器
        appData.elements.testElements.dimensionIndicator.textContent = `${question.dimensionName}模块`;
        appData.elements.testElements.dimensionIndicator.className = `dimension-badge dimension-badge-${question.dimension} inline-block mb-4`;
        
        // 更新进度条
        const progressPercentage = (question.id / appData.questions.length) * 100;
        appData.elements.testElements.progressBarFill.style.width = `${progressPercentage}%`;
        
        // 更新选项
        appData.elements.testElements.optionsContainer.innerHTML = '';
        question.options.forEach((option, index) => {
          const optionCard = document.createElement('div');
          optionCard.className = 'option-card';
          if (appData.user.selectedOptions[appData.user.currentQuestionIndex] === index) {
            optionCard.classList.add('selected');
          }
          optionCard.dataset.index = index;
          optionCard.dataset.score = option.score;
          optionCard.innerHTML = `<p>${String.fromCharCode(65 + index)}. ${option.text}</p>`;
          
          optionCard.addEventListener('click', () => {
            // 移除其他选项的选中状态
            document.querySelectorAll('.option-card').forEach(card => {
              card.classList.remove('selected');
            });
            
            // 添加当前选项的选中状态
            optionCard.classList.add('selected');
            
            // 记录选中的选项
            appData.user.selectedOptions[appData.user.currentQuestionIndex] = index;
          });
          
          appData.elements.testElements.optionsContainer.appendChild(optionCard);
        });
        
        // 更新导航按钮状态
        appData.elements.testElements.prevBtn.disabled = appData.user.currentQuestionIndex === 0;
        appData.elements.testElements.prevBtn.classList.toggle('opacity-50', appData.user.currentQuestionIndex === 0);
        appData.elements.testElements.prevBtn.classList.toggle('cursor-not-allowed', appData.user.currentQuestionIndex === 0);
        
        if (appData.user.currentQuestionIndex === appData.questions.length - 1) {
          appData.elements.testElements.nextBtn.textContent = '完成测试';
          appData.elements.testElements.nextBtn.innerHTML = '完成测试<i class="fa fa-check ml-2"></i>';
        } else {
          appData.elements.testElements.nextBtn.textContent = '下一题';
          appData.elements.testElements.nextBtn.innerHTML = '下一题<i class="fa fa-arrow-right ml-2"></i>';
        }
      },
      
      // 更新计时器显示
      updateTimer: function() {
        const minutes = Math.floor(appData.user.timeRemaining / 60);
        const seconds = appData.user.timeRemaining % 60;
        appData.elements.testElements.timeRemaining.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        // 如果剩余时间少于1分钟，显示红色
        if (appData.user.timeRemaining < 60) {
          appData.elements.testElements.timeRemaining.classList.add('text-red-500');
        } else {
          appData.elements.testElements.timeRemaining.classList.remove('text-red-500');
        }
      },
      
      // 计算测试结果
      calculateResults: function() {
        // 停止计时器
        if (appData.timer) {
          clearInterval(appData.timer);
          appData.timer = null;
        }
        
        // 计算各维度得分
        appData.questions.forEach((question, index) => {
          const selectedIndex = appData.user.selectedOptions[index];
          if (selectedIndex !== null) {
            const score = question.options[selectedIndex].score;
            appData.user.scores[question.dimension] += score;
          }
        });
        
        // 确定动物类型
        const animalType = this.determineAnimalType();
        appData.user.currentAnimalType = animalType;
        
        // 更新结果页面
        this.updateResultPage(animalType);
        
        // 显示结果页面
        this.showSection('result');
      },
      
      // 根据得分确定动物类型
      determineAnimalType: function() {
        // 简化版的动物类型匹配逻辑
        // 在实际应用中，这里应该有更复杂的匹配算法
        
        // 计算各维度的高低程度
        const dimensions = {
          extraversion: this.getDimensionLevel(appData.user.scores.extraversion),
          agreeableness: this.getDimensionLevel(appData.user.scores.agreeableness),
          conscientiousness: this.getDimensionLevel(appData.user.scores.conscientiousness),
          neuroticism: this.getDimensionLevel(appData.user.scores.neuroticism),
          openness: this.getDimensionLevel(appData.user.scores.openness)
        };
        
        // 检查是否匹配隐藏款
        // 白泽系：五维均衡
        const isBaize = Object.values(dimensions).every(level => level === '中');
        if (isBaize) {
          return appData.animalTypes.find(type => type.id === 'baize');
        }
        
        // 烛龙系：外向性极高，情绪稳定性极低
        const isZhulong = dimensions.extraversion === '高' && dimensions.neuroticism === '低';
        if (isZhulong) {
          return appData.animalTypes.find(type => type.id === 'zhulong');
        }
        
        // 检查是否匹配稀有款
        // 金雕系：高外向 + 低宜人 + 高尽责
        const isGoldeneagle = dimensions.extraversion === '高' && dimensions.agreeableness === '低' && dimensions.conscientiousness === '高';
        if (isGoldeneagle) {
          return appData.animalTypes.find(type => type.id === 'goldeneagle');
        }
        
        // 匹配普通款
        // 刺猬系：低外向 + 中宜人 + 中尽责 + 高情绪稳定 + 中开放
        if (dimensions.extraversion === '低' && dimensions.neuroticism === '高') {
          return appData.animalTypes.find(type => type.id === 'hedgehog');
        }
        
        // 水獭系：高外向 + 高宜人 + 中开放
        if (dimensions.extraversion === '高' && dimensions.agreeableness === '高') {
          return appData.animalTypes.find(type => type.id === 'otter');
        }
        
        // 百灵鸟系：高外向 + 高开放
        if (dimensions.extraversion === '高' && dimensions.openness === '高') {
          return appData.animalTypes.find(type => type.id === 'lark');
        }
        
        // 树蛙系：中外向 + 高宜人 + 高开放
        if (dimensions.agreeableness === '高' && dimensions.openness === '高') {
          return appData.animalTypes.find(type => type.id === 'treefrog');
        }
        
        // 蜜蜂系：高尽责 + 高宜人 + 低开放
        if (dimensions.conscientiousness === '高' && dimensions.agreeableness === '高' && dimensions.openness === '低') {
          return appData.animalTypes.find(type => type.id === 'bee');
        }
        
        // 默认返回刺猬系
        return appData.animalTypes.find(type => type.id === 'hedgehog');
      },
      
      // 获取维度水平（低、中、高）
      getDimensionLevel: function(score) {
        if (score <= 6) return '低';
        if (score <= 12) return '中';
        return '高';
      },
      
      // 更新结果页面
      updateResultPage: function(animalType) {
        // 更新动物形象
        appData.elements.resultElements.resultAnimalImage.src = animalType.image;
        appData.elements.resultElements.resultAnimalImage.alt = animalType.name;
        
        // 更新动物信息
        appData.elements.resultElements.animalName.textContent = animalType.name;
        appData.elements.resultElements.animalTagline.textContent = animalType.tagline;
        appData.elements.resultElements.animalDescription.textContent = animalType.description;
        
        // 更新稀有度标签
        let rarityText = '';
        let rarityClass = '';
        
        switch (animalType.rarity) {
          case 'common':
            rarityText = '普通款';
            rarityClass = 'bg-common/20 text-common';
            appData.elements.resultElements.blindboxContainer.className = 'blindbox blindbox-common absolute inset-0 flex items-center justify-center';
            break;
          case 'rare':
            rarityText = '稀有款';
            rarityClass = 'bg-rare/20 text-rare';
            appData.elements.resultElements.blindboxContainer.className = 'blindbox blindbox-rare absolute inset-0 flex items-center justify-center';
            break;
          case 'hidden':
            rarityText = '隐藏款';
            rarityClass = 'bg-hidden/20 text-hidden';
            appData.elements.resultElements.blindboxContainer.className = 'blindbox blindbox-hidden absolute inset-0 flex items-center justify-center';
            break;
        }
        
        appData.elements.resultElements.animalRarity.textContent = rarityText;
        appData.elements.resultElements.animalRarity.className = `inline-block px-3 py-1 rounded-full text-sm font-medium ${rarityClass} mb-4`;
        
        // 更新社交优势
        appData.elements.resultElements.socialStrengths.innerHTML = '';
        animalType.strengths.forEach(strength => {
          const strengthElement = document.createElement('div');
          strengthElement.className = 'flex items-start';
          strengthElement.innerHTML = `
            <div class="bg-primary/10 rounded-full p-2 mr-4">
              <i class="fa fa-check text-primary"></i>
            </div>
            <div>
              <h4 class="font-medium text-gray-800">${strength.title}</h4>
              <p class="text-gray-600">${strength.description}</p>
            </div>
          `;
          appData.elements.resultElements.socialStrengths.appendChild(strengthElement);
        });
        
        // 更新雷达图
        this.updateRadarChart();
        
        // 更新维度得分显示
        this.updateDimensionScores();
        
        // 重置盲盒状态
        appData.elements.resultElements.blindboxContainer.classList.remove('hidden');
        appData.elements.resultElements.animalImageContainer.classList.add('hidden');
      },
      
      // 更新雷达图
      updateRadarChart: function() {
        const ctx = document.getElementById('personality-radar-chart').getContext('2d');
        
        // 销毁旧图表（如果存在）
        if (window.personalityChart) {
          window.personalityChart.destroy();
        }
        
        // 创建新图表
        window.personalityChart = new Chart(ctx, {
          type: 'radar',
          data: {
            labels: ['外向性', '宜人性', '尽责性', '情绪稳定性', '开放性'],
            datasets: [{
              label: '你的得分',
              data: [
                appData.user.scores.extraversion,
                appData.user.scores.agreeableness,
                appData.user.scores.conscientiousness,
                appData.user.scores.neuroticism,
                appData.user.scores.openness
              ],
              backgroundColor: 'rgba(99, 102, 241, 0.2)',
              borderColor: 'rgba(99, 102, 241, 1)',
              borderWidth: 2,
              pointBackgroundColor: 'rgba(99, 102, 241, 1)',
              pointBorderColor: '#fff',
              pointHoverBackgroundColor: '#fff',
              pointHoverBorderColor: 'rgba(99, 102, 241, 1)'
            }]
          },
          options: {
            scales: {
              r: {
                beginAtZero: true,
                max: 18,
                ticks: {
                  stepSize: 3
                }
              }
            },
            plugins: {
              legend: {
                display: false
              }
            }
          }
        });
      },
      
      // 更新维度得分显示
      updateDimensionScores: function() {
        const dimensionScores = document.getElementById('dimension-scores');
        const dimensions = [
          { id: 'extraversion', name: '外向性', color: 'bg-extraversion' },
          { id: 'agreeableness', name: '宜人性', color: 'bg-agreeableness' },
          { id: 'conscientiousness', name: '尽责性', color: 'bg-conscientiousness' },
          { id: 'neuroticism', name: '情绪稳定性', color: 'bg-neuroticism' },
          { id: 'openness', name: '开放性', color: 'bg-openness' }
        ];
        
        dimensionScores.innerHTML = '';
        dimensions.forEach(dimension => {
          const score = appData.user.scores[dimension.id];
          const percentage = (score / 18) * 100;
          const level = this.getDimensionLevel(score);
          
          const dimensionElement = document.createElement('div');
          dimensionElement.className = 'flex justify-between items-center';
          dimensionElement.innerHTML = `
            <span class="text-gray-700">${dimension.name}</span>
            <div class="flex items-center">
              <div class="w-32 h-2 bg-gray-200 rounded-full mr-2">
                <div class="h-full ${dimension.color} rounded-full" style="width: ${percentage}%"></div>
              </div>
              <span class="text-sm font-medium text-gray-600">${level}</span>
            </div>
          `;
          
          dimensionScores.appendChild(dimensionElement);
        });
      },
      
      // 初始化收集页面
      initCollectionPage: function() {
        const collectionContainer = document.querySelector('#section-collection .grid');
        const collectionCount = appData.user.collection.length;
        const totalAnimals = appData.animalTypes.length; // 在实际应用中，这里应该是36种动物
        
        // 更新收集进度
        appData.elements.collectionElements.collectionCount.textContent = collectionCount;
        const progressPercentage = (collectionCount / totalAnimals) * 100;
        appData.elements.collectionElements.collectionProgress.style.width = `${progressPercentage}%`;
        
        // 清空收集容器
        collectionContainer.innerHTML = '';
        
        // 如果没有收集任何动物，显示空状态
        if (collectionCount === 0) {
          collectionContainer.appendChild(appData.elements.collectionElements.emptyCollectionMessage);
          return;
        }
        
        // 隐藏空状态消息
        appData.elements.collectionElements.emptyCollectionMessage.classList.add('hidden');
        
        // 添加收集的动物卡片
        appData.user.collection.forEach(animalId => {
          const animalType = appData.animalTypes.find(type => type.id === animalId);
          if (animalType) {
            const animalCard = document.createElement('div');
            
            let cardClass = 'animal-card p-4 flex flex-col items-center';
            switch (animalType.rarity) {
              case 'common':
                cardClass += ' animal-card-common';
                break;
              case 'rare':
                cardClass += ' animal-card-rare';
                break;
              case 'hidden':
                cardClass += ' animal-card-hidden';
                break;
            }
            
            animalCard.className = cardClass;
            animalCard.innerHTML = `
              <div class="relative w-24 h-24 flex items-center justify-center mb-2 overflow-hidden rounded-full bg-gradient-to-br from-gray-100 to-gray-200">
                <img src="${animalType.image}" alt="${animalType.name}" class="w-20 h-20 object-contain transition-transform duration-300 hover:scale-110">
                <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-full pointer-events-none"></div>
              </div>
              <h3 class="font-medium text-gray-800">${animalType.name}</h3>
              <p class="text-xs text-gray-500">${animalType.tagline}</p>
            `;
            
            // 添加点击事件，显示动物详情
            animalCard.addEventListener('click', () => {
              this.showAnimalDetails(animalType);
            });
            
            collectionContainer.appendChild(animalCard);
          }
        });
      },
      
      // 显示动物详情
      showAnimalDetails: function(animalType) {
        // 在实际应用中，这里应该显示一个模态框，展示动物的详细信息
        alert(`${animalType.name} - ${animalType.tagline}\n\n${animalType.description}`);
      },
      
      // 开启盲盒动画
      openBlindbox: function() {
        const blindboxContainer = appData.elements.resultElements.blindboxContainer;
        const animalImageContainer = appData.elements.resultElements.animalImageContainer;
        
        // 添加开启动画
        blindboxContainer.classList.add('blindbox-opening');
        
        // 2秒后显示动物形象
        setTimeout(() => {
          blindboxContainer.classList.add('hidden');
          animalImageContainer.classList.remove('hidden');
        }, 2000);
      },
      
      // 保存动物到收集
      saveToCollection: function() {
        const animalType = appData.user.currentAnimalType;
        
        // 检查是否已经收集过该动物
        if (appData.user.collection.includes(animalType.id)) {
          alert('你已经收集过这种动物了！');
          return;
        }
        
        // 添加到收集
        appData.user.collection.push(animalType.id);
        
        // 保存到本地存储
        this.saveUserData();
        
        // 显示成功消息
        alert(`成功收集 ${animalType.name}！`);
      },
      
      // 保存用户数据到本地存储
      saveUserData: function() {
        localStorage.setItem('animalPersonalityTestData', JSON.stringify({
          collection: appData.user.collection,
          lastActive: appData.user.lastActive
        }));
      },
      
      // 从本地存储加载用户数据
      loadUserData: function() {
        const savedData = localStorage.getItem('animalPersonalityTestData');
        if (savedData) {
          const data = JSON.parse(savedData);
          appData.user.collection = data.collection || [];
          appData.user.lastActive = data.lastActive || new Date().toISOString();
          
          // 检查数据是否过期（30天）
          this.checkDataExpiration();
        } else {
          // 新设备，检查是否有URL参数中的导入数据
          this.checkUrlImportData();
          
          // 提示用户导入数据
          setTimeout(() => {
            this.promptForDataImport();
          }, 2000);
        }
        
        // 更新最后活跃时间
        this.updateLastActiveTime();
      },
      
      // 检查数据是否过期
      checkDataExpiration: function() {
        const lastActiveDate = new Date(appData.user.lastActive);
        const currentDate = new Date();
        const daysSinceLastActive = (currentDate - lastActiveDate) / (1000 * 60 * 60 * 24);
        
        // 如果超过30天未活跃，提示用户是否清理数据
        if (daysSinceLastActive > 30) {
          if (confirm('您的收集数据已超过30天未更新，是否清理本地数据以释放空间？')) {
            this.clearUserData();
            alert('本地数据已清理！');
          } else {
            // 更新最后活跃时间
            this.updateLastActiveTime();
          }
        }
      },
      
      // 更新最后活跃时间
      updateLastActiveTime: function() {
        appData.user.lastActive = new Date().toISOString();
        this.saveUserData();
      },
      
      // 检查URL参数中的导入数据
      checkUrlImportData: function() {
        const urlParams = new URLSearchParams(window.location.search);
        const importData = urlParams.get('importData');
        
        if (importData) {
          try {
            // 解码Base64数据
            const decodedData = atob(importData);
            const data = JSON.parse(decodedData);
            
            if (data.collection && Array.isArray(data.collection)) {
              appData.user.collection = data.collection;
              this.saveUserData();
              alert('成功从链接导入收集数据！');
              
              // 移除URL参数
              window.history.replaceState({}, document.title, window.location.pathname);
            }
          } catch (error) {
            console.error('从URL导入数据失败:', error);
          }
        }
      },
      
      // 提示用户导入数据
      promptForDataImport: function() {
        if (confirm('检测到这是您首次在该设备使用本应用，是否有收集数据需要导入？')) {
          // 触发文件选择器
          document.getElementById('import-collection-btn').click();
        }
      },
      
      // 清理用户数据
      clearUserData: function() {
        appData.user.collection = [];
        appData.user.lastActive = null;
        localStorage.removeItem('animalPersonalityTestData');
      },
      
      // 导出收集数据
      exportCollectionData: function() {
        // 创建包含收集数据的对象
        const exportData = {
          collection: appData.user.collection,
          timestamp: new Date().toISOString(),
          version: "1.0"
        };
        
        // 询问用户导出方式
        const exportMethod = prompt('请选择导出方式：\n1. 下载JSON文件\n2. 生成分享链接', '1');
        
        if (exportMethod === '1') {
          // 方式1：下载JSON文件
          this.exportAsJsonFile(exportData);
        } else if (exportMethod === '2') {
          // 方式2：生成分享链接
          this.exportAsShareLink(exportData);
        } else {
          alert('已取消导出！');
        }
      },
      
      // 以JSON文件形式导出
      exportAsJsonFile: function(exportData) {
        // 将数据转换为JSON字符串
        const jsonData = JSON.stringify(exportData);
        
        // 创建Blob对象
        const blob = new Blob([jsonData], { type: 'application/json' });
        
        // 创建下载链接
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `animal_personality_collection_${new Date().toISOString().slice(0, 10)}.json`;
        
        // 触发下载
        document.body.appendChild(a);
        a.click();
        
        // 清理
        setTimeout(() => {
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        }, 0);
        
        alert('收集数据已导出为JSON文件！');
      },
      
      // 以分享链接形式导出
      exportAsShareLink: function(exportData) {
        try {
          // 将数据转换为JSON字符串
          const jsonData = JSON.stringify(exportData);
          
          // 编码为Base64
          const base64Data = btoa(encodeURIComponent(jsonData));
          
          // 创建分享链接
          const shareUrl = `${window.location.origin}${window.location.pathname}?importData=${base64Data}`;
          
          // 复制到剪贴板
          navigator.clipboard.writeText(shareUrl)
            .then(() => {
              alert('分享链接已复制到剪贴板！\n\n您可以在其他设备上打开此链接来导入数据。');
            })
            .catch(err => {
              console.error('无法复制到剪贴板:', err);
              // 如果无法复制，显示链接
              alert(`分享链接已生成：\n\n${shareUrl}\n\n请手动复制此链接。`);
            });
        } catch (error) {
          alert('生成分享链接失败：' + error.message);
        }
      },
      
      // 导入收集数据
      importCollectionData: function(file) {
        const reader = new FileReader();
        
        reader.onload = (e) => {
          try {
            const importData = JSON.parse(e.target.result);
            
            // 验证数据格式
            if (!importData.collection || !Array.isArray(importData.collection)) {
              throw new Error('无效的数据格式');
            }
            
            // 合并收集数据（去重）
            const newCollection = [...new Set([...appData.user.collection, ...importData.collection])];
            
            // 更新收集数据
            appData.user.collection = newCollection;
            
            // 保存到本地存储
            this.saveUserData();
            
            // 更新收集页面
            this.initCollectionPage();
            
            alert(`成功导入 ${importData.collection.length} 个动物！`);
          } catch (error) {
            alert('导入失败：' + error.message);
          }
        };
        
        reader.readAsText(file);
      }
    };

    // 事件监听器
    document.addEventListener('DOMContentLoaded', function() {
      // 加载用户数据
      utils.loadUserData();
      
      // 导航按钮点击事件
      appData.elements.navButtons.home.addEventListener('click', () => utils.showSection('home'));
      appData.elements.navButtons.test.addEventListener('click', () => {
        utils.initTestPage();
        utils.showSection('test');
      });
      appData.elements.navButtons.collection.addEventListener('click', () => {
        utils.initCollectionPage();
        utils.showSection('collection');
      });
      appData.elements.navButtons.about.addEventListener('click', () => utils.showSection('about'));
      
      // 首页按钮点击事件
      document.getElementById('start-test-btn').addEventListener('click', () => {
        utils.initTestPage();
        utils.showSection('test');
      });
      
      document.getElementById('view-collection-btn').addEventListener('click', () => {
        utils.initCollectionPage();
        utils.showSection('collection');
      });
      
      // 测试页面按钮点击事件
      appData.elements.testElements.prevBtn.addEventListener('click', () => {
        if (appData.user.currentQuestionIndex > 0) {
          appData.user.currentQuestionIndex--;
          utils.updateQuestion();
        }
      });
      
      appData.elements.testElements.nextBtn.addEventListener('click', () => {
        // 检查是否选择了选项
        if (appData.user.selectedOptions[appData.user.currentQuestionIndex] === null) {
          alert('请选择一个选项！');
          return;
        }
        
        // 如果是最后一题，计算结果
        if (appData.user.currentQuestionIndex === appData.questions.length - 1) {
          utils.calculateResults();
          return;
        }
        
        // 否则，显示下一题
        appData.user.currentQuestionIndex++;
        utils.updateQuestion();
      });
      
      // 结果页面按钮点击事件
      appData.elements.resultElements.blindboxContainer.addEventListener('click', () => {
        utils.openBlindbox();
      });
      
      document.getElementById('share-result-btn').addEventListener('click', () => {
        appData.elements.modals.shareModal.classList.remove('hidden');
      });
      
      document.getElementById('save-to-collection-btn').addEventListener('click', () => {
        utils.saveToCollection();
      });
      
      document.getElementById('restart-test-btn').addEventListener('click', () => {
        utils.initTestPage();
        utils.showSection('test');
      });
      
      // 收集页面按钮点击事件
      document.getElementById('start-test-from-collection').addEventListener('click', () => {
        utils.initTestPage();
        utils.showSection('test');
      });
      
      // 导出收集数据按钮点击事件
      document.getElementById('export-collection-btn').addEventListener('click', () => {
        utils.exportCollectionData();
      });
      
      // 导入收集数据按钮变化事件
      document.getElementById('import-collection-btn').addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          utils.importCollectionData(file);
          // 重置文件输入
          e.target.value = '';
        }
      });
      
      // 清理数据按钮点击事件
      document.getElementById('clear-collection-btn').addEventListener('click', () => {
        if (confirm('确定要清理所有收集数据吗？此操作不可撤销！')) {
          utils.clearUserData();
          utils.initCollectionPage();
          alert('收集数据已清理！');
        }
      });
      
      // 关于页面按钮点击事件
      document.getElementById('back-to-home-from-about').addEventListener('click', () => {
        utils.showSection('home');
      });
      
      // 分享弹窗按钮点击事件
      document.getElementById('close-share-modal').addEventListener('click', () => {
        appData.elements.modals.shareModal.classList.add('hidden');
      });
      
      // 点击分享弹窗外部关闭弹窗
      appData.elements.modals.shareModal.addEventListener('click', (e) => {
        if (e.target === appData.elements.modals.shareModal) {
          appData.elements.modals.shareModal.classList.add('hidden');
        }
      });
      
      // 显示首页
      utils.showSection('home');
    });
  </script>
</body>
</html>
